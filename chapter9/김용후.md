# chapter9 계층형 설계

### 계층형 설계 
- 계층형 설계의 핵심은 인터페이스로 추상화 하는 것 -> 하위 계층의 구현을 감추고 인터페이스만 노출
- 편리한 계층: 계층을 건너뛰는것 (건너 뛰는 게 이득인 상황도 있긴함으로 건너뛰지 않아야할때를 잘 캐치해서 적시에 리팩터링하는게 중요한 것 같음)
  - 근데 이것은 리팩터링이 습관화 되있는 팀에 해당이고 아니라면 첨부터 빡빡하게 가는것도 좋은 것 같음

### 작은 인터페이스
**새로운 함수를 만들땐 되도록 상위단계의 추상화 레이어에 하위단계의 인터페이스만 써서 구현하는 것이 좋다.**
- 보통 내부구조를 모르고 작성하기 때문에 간결하여 읽기 쉽다.
- 이미 사용하는 곳이 없어 다른곳에 영향을 덜 끼친다.
- 하위 계층의 인터페이스가 장황해지는 것을 막을 수 있다.

**로깅의 예를 들면서 코드를 끼워넣을때도 하위계층의 인터페이스를 단순하게 유지하고 상위 계층에서 구현하라 한다.**
- 위의 장점을 갖지만 중복이 생긴다는 단점이 있을수있을 듯
- 득실을 잘따져서 배치하는 것이 좋을것 같고
- 액션 성격의 기능이면 액션에 두게끔 주의하면 더 좋다.

**정리, 작은 인터페이스가 중요한 이유**
- 낮은수준의 코드는 복잡하고 이해하기 어렵다. => 버그가 더 많다.
- 인터페이스가 커질수록 협업 포인트가 많아진다 => 소통비용이 증가한다.
- 인터페이스가 커질수록 알아야할 것이 많아서 사용하기 어려워진다. => 위와 일맥상통

> 210p, 만약을 대비한 코드 만들지 않기 `YAGNI` 
> 실제로 4~5월 쯤에 앱은 배포를 자주 못하니 만약을 대비한 api를 설계를 했는데 아직까지 쓰지 않고 있음..
히스토리 모르는 사람이 보면 그냥 읽기 힘들게만 만든다..

### 테스트 전략
하위 레이어일수록 변하지 않고 많은곳에서 사용함으로 테스트 가성비가 좋다.

### 느낀점
역시 의존성 관리는 함수형이나 객체지향이나 비슷하고 중요하구나.
