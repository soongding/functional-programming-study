# Chapter 8
## 용어 정리
### 소프트웨어 설계
- 코드 만들고, 테스트하고, 유지보수하기 쉬운 프로그래밍 방법을 선택하기 위해 미적 감각을 사용하는것

### 계층형 설계
- 소프트웨어를 계층으로 구성하는 기술
- 각 계층에 있는 함수는 바로 아래 계층에 있는 함수를 이용해 정의

### 오프-바이-원 에러

- gt/gte, lt/lte 같은 비교문을 잘못 선택해 의도치 않게 마지막 항목을 처리하거나 처리하지 못하는 오류

### 호출 그래프

- 직접 만든 함수와 언어 기능은 추상화 수준이 다름
- 계층이 많을 수록 유용하다.
- 같은 계층에 있는 함수는 같은 목적을 가져야 한다.
    - 장바구니 비즈니스 규칙 > 일반적인 비즈니스 규칙 > 장바구니 기본 동작 > 제품에 대한 기본 동작 > 카피-온-라이트 동작 > 언어 기능
- 반복문/ 배열 인덱스를 참조하는 기능은 더 낮은 추상화 단계


## 계층형 설계 패턴

1. 직접 구현
    1. 비슷한 추상화 계층에 있는 함수를 호출한다.
    2. 함수 시그니처가 나타내고 있는 문제를 함수 본문에서 적절한 구체화 수준으로 해결해야 한다.
    3. 너무 구체적이면 안된다.
    - 함수가 모두 비슷한 계층에 있다면 직접 구현했다고 할 수 있다.
2. 추상화 벽
    1. 인터페이스를 사용하여 코드를 만든다.
    2. 고수준의 추상화 단계만 생각하면 된다.
3. 작은 인터페이스
    1. 비즈니스 개념을 나타내는 인터페이스는 작고 강력한 동작으로 구성하는것이 좋다.
    2. 직간접적으로 촤소한의 인터페이스를 유지하는것이 좋다.
4. 편리한 계층
    1. 계층이 좋아서 마구잡이로 추가하는 것이 아니라, 도움이 되는 계층에 시간을 투자하는것이 좋다.
    2. 코드와 그 코드의 추상화 계층은 작업할 때 편리해야 한다.

## 줌 레벨

### 전역 줌 레벨

- 전체 그래프에서 필요한 부분을 살펴볼 수 있다.

### 계층 줌 레벨

- 계층과 계층사이 부분을 살펴볼 수 있다.
- 직접 구현 패턴을 사용하면 모든 화살표가 같은 길이를 가져야 한다.
- 다양한 계층을 넘나드는 것은 같은 구체화 수준이 아니라는 증거다.

### 함수 줌 레벨

- 함수 단위로 보면 함수 하나가 가진 화살표를 비교할 수 있다.
- 계층이 다르다면 → 반복문을 빼내는 방법이 있다.

## 직접 구현 패턴
- 직접 구현한 코드는 구체화 단계의 범위를 줄일 수 있음
- 특정 구체화 단계에 집중하게 되어 설계감각을 키울 수 있음
- 호출 그래프는 구체화 단계에 대한 풍부한 단서를 보여줌
- 함수를 추출하면 더 일반적인 함수로 만들 수 있음 (반복문 빼내기)
- 일반적인 함수가 많을 수록 재사용하기 좋음 (중복 코드 제거 등)
- 복잡성을 감추지 않음
