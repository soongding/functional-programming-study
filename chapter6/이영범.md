# 개요

### 쓰기

- 데이터를 바꾸는 것
- 불변성 원칙에 따라 구현해야 함
- 불변성 원칙 = 카피-온-라이트
- 카피-온-라이트는 쓰기를 읽기로 바꾼다

### 카피-온-라이트 원칙 세 단계

1. 복사본 만들기
2. 복사본 변경하기
3. 복사본 리턴하기

> 값을 바꾸지 않으면 복사하지 않아도 된다
> 

### 쓰기 & 읽기 동작 한번에 하기

1. 읽기와 쓰기 함수로 각각 함수 분리하기
2. 함수에서 값을 두 개 리턴한다

### 불변 데이터 구조를 읽는 것은 계산이다

변경 가능한 데이터를 읽는 것 → 액션

쓰기 → 데이터를 변경 가능한 구조

어떤 데이터에 쓰기가 없다면 → 데이터는 변경 불가능한 데이터

불변 데이터 구조를 읽는 것 → 계산

쓰기 → 읽기 로 바꾸면 코드에 계산이 많아짐

### 불변 데이터는 빠르다

단점

- 변경 가능한 데이터 구조보다 메모리를 더 많이 쓰고 느림

장점

- 대용량의 고성능 시스템을 구현하지 쉬움
- 언제든 최적화 할 수 있음
- 가비지 콜렉터는 매우 빨라서 그냥 쓰자
- 생각 보다 많이 복사하지 안흔다
- 데이터 구조를 복사할 때 최대한 많은 구조를 공유해 적은 메모리, GC의 부담 적음
